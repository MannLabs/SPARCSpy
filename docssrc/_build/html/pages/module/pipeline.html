<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline &mdash; Viper Core  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ml" href="ml.html" />
    <link rel="prev" title="processing" href="processing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Viper Core
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Ecosystem:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem.html">SPARCSpy Ecosystem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command Line Tools:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vipercmd.html">viper-split</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vipercmd.html#viper-stat">viper-stat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vipercmd.html#viper-cleanup">viper-cleanup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analysis Pipeline:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/introduction.html">base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/project.html">Project Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/segmentation.html">Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/extraction.html">Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/classification.html">Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/selection.html">Selection</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Module Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="processing.html">processing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base">base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logable">Logable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.base.Logable"><code class="docutils literal notranslate"><span class="pre">Logable</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#processingstep">ProcessingStep</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.base.ProcessingStep"><code class="docutils literal notranslate"><span class="pre">ProcessingStep</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-vipercore.pipeline.project">project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.project.Project"><code class="docutils literal notranslate"><span class="pre">Project</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.DEFAULT_CONFIG_NAME"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_CONFIG_NAME</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.DEFAULT_SEGMENTATION_DIR_NAME"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SEGMENTATION_DIR_NAME</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.DEFAULT_EXTRACTION_DIR_NAME"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_EXTRACTION_DIR_NAME</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.DEFAULT_CLASSIFICATION_DIR_NAME"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_CLASSIFICATION_DIR_NAME</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.DEFAULT_SELECTION_DIR_NAME"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SELECTION_DIR_NAME</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.classify"><code class="docutils literal notranslate"><span class="pre">Project.classify()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.extract"><code class="docutils literal notranslate"><span class="pre">Project.extract()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.load_input_from_array"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_array()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.load_input_from_file"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.segment"><code class="docutils literal notranslate"><span class="pre">Project.segment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.Project.select"><code class="docutils literal notranslate"><span class="pre">Project.select()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject"><code class="docutils literal notranslate"><span class="pre">TimecourseProject</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject.extract"><code class="docutils literal notranslate"><span class="pre">TimecourseProject.extract()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_array"><code class="docutils literal notranslate"><span class="pre">TimecourseProject.load_input_from_array()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_files"><code class="docutils literal notranslate"><span class="pre">TimecourseProject.load_input_from_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_files_and_merge"><code class="docutils literal notranslate"><span class="pre">TimecourseProject.load_input_from_files_and_merge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.project.TimecourseProject.segment"><code class="docutils literal notranslate"><span class="pre">TimecourseProject.segment()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.project.imread"><code class="docutils literal notranslate"><span class="pre">imread()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#segmentation">segmentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Segmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.segmentation.Segmentation"><code class="docutils literal notranslate"><span class="pre">Segmentation</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#shardedsegmentation">ShardedSegmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#timecoursesegmentation">TimecourseSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multithreadedtimecoursesegmentation">MultithreadedTimecourseSegmentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-vipercore.pipeline.workflows">workflows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.BaseSegmentation"><code class="docutils literal notranslate"><span class="pre">BaseSegmentation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation"><code class="docutils literal notranslate"><span class="pre">CytosolCellposeTimecourseSegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse"><code class="docutils literal notranslate"><span class="pre">CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.method"><code class="docutils literal notranslate"><span class="pre">CytosolCellposeTimecourseSegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.CytosolSegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.DAPISegmentation"><code class="docutils literal notranslate"><span class="pre">DAPISegmentation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.DAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">DAPISegmentationCellpose</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation"><code class="docutils literal notranslate"><span class="pre">MultithreadedCytosolCellposeTimecourseSegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse"><code class="docutils literal notranslate"><span class="pre">MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.method"><code class="docutils literal notranslate"><span class="pre">MultithreadedCytosolCellposeTimecourseSegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation"><code class="docutils literal notranslate"><span class="pre">MultithreadedWGATimecourseSegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse"><code class="docutils literal notranslate"><span class="pre">MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.method"><code class="docutils literal notranslate"><span class="pre">MultithreadedWGATimecourseSegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedDAPISegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedDAPISegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedWGASegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.ShardedWGASegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.WGASegmentation"><code class="docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation"><code class="docutils literal notranslate"><span class="pre">WGATimecourseSegmentation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse"><code class="docutils literal notranslate"><span class="pre">WGATimecourseSegmentation.WGASegmentation_Timecourse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.method"><code class="docutils literal notranslate"><span class="pre">WGATimecourseSegmentation.method</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-vipercore.pipeline.extraction">extraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.extraction.HDF5CellExtraction"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.extraction.HDF5CellExtraction.save_index_to_remove"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction.save_index_to_remove</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vipercore.pipeline.extraction.TimecourseHDF5CellExtraction"><code class="docutils literal notranslate"><span class="pre">TimecourseHDF5CellExtraction</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#classification">classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selection">selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lmdselection">LMDSelection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vipercore.pipeline.selection.LMDSelection"><code class="docutils literal notranslate"><span class="pre">LMDSelection</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ml.html">ml</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Viper Core</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pipeline</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pages/module/pipeline.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pipeline">
<h1>pipeline<a class="headerlink" href="#pipeline" title="Permalink to this heading"></a></h1>
<section id="base">
<h2>base<a class="headerlink" href="#base" title="Permalink to this heading"></a></h2>
<section id="logable">
<h3>Logable<a class="headerlink" href="#logable" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.base.</span></span><span class="sig-name descname"><span class="pre">Logable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.Logable" title="Permalink to this definition"></a></dt>
<dd><p>object which can create log entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>debug</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to <code class="docutils literal notranslate"><span class="pre">True</span></code> log entries will be printed to the console.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable.directory">
<span class="sig-name descname"><span class="pre">directory</span></span><a class="headerlink" href="#vipercore.pipeline.base.Logable.directory" title="Permalink to this definition"></a></dt>
<dd><p>A directory must be set in every descendant before log can be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable.DEFAULT_LOG_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_LOG_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.base.Logable.DEFAULT_LOG_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default log file name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">processing.log</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable.DEFAULT_FORMAT">
<span class="sig-name descname"><span class="pre">DEFAULT_FORMAT</span></span><a class="headerlink" href="#vipercore.pipeline.base.Logable.DEFAULT_FORMAT" title="Permalink to this definition"></a></dt>
<dd><p>Date and time format used for logging. See <a href="#id2"><span class="problematic" id="id3">`datetime.strftime &lt;https://docs.python.org/3/library/datetime.html#datetime.date.strftime`_</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.Logable.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Get the current timestamp in the DEFAULT_FORMAT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted timestamp.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.Logable.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.Logable.log" title="Permalink to this definition"></a></dt>
<dd><p>log a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>dict</em><em>(</em><em>str</em><em>)</em>) – Strings are s</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="processingstep">
<h3>ProcessingStep<a class="headerlink" href="#processingstep" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.base.ProcessingStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.base.</span></span><span class="sig-name descname"><span class="pre">ProcessingStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intermediate_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.ProcessingStep" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#vipercore.pipeline.base.Logable" title="vipercore.pipeline.base.Logable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logable</span></code></a></p>
<p>Processing step living in its own subdirectory of the project.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – Config file which is passed by the Project class when called. Is loaded from the project based on the name of the class.</p></li>
<li><p><strong>directory</strong> (<em>str</em>) – Directory which should be used by the processing step. The directory will be newly created if it does not exist yet. When used with the <a class="reference internal" href="#vipercore.pipeline.project.Project" title="vipercore.pipeline.project.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">vipercore.pipeline.project.Project</span></code></a> class, a subdirectory of the project directory is passed.</p></li>
<li><p><strong>intermediate_output</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True intermediate outputs will be saved where applicable.</p></li>
<li><p><strong>debug</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True debug outputs will be printed where applicable.</p></li>
<li><p><strong>overwrite</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True, the processing step directory will be completely deleted and newly created when called.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.ProcessingStep.get_directory">
<span class="sig-name descname"><span class="pre">get_directory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.ProcessingStep.get_directory" title="Permalink to this definition"></a></dt>
<dd><p>Get the directory for this processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Directory path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.ProcessingStep.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.ProcessingStep.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Get the current timestamp in the DEFAULT_FORMAT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted timestamp.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.ProcessingStep.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.ProcessingStep.log" title="Permalink to this definition"></a></dt>
<dd><p>log a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>dict</em><em>(</em><em>str</em><em>)</em>) – Strings are s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.base.ProcessingStep.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.base.ProcessingStep.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Registers a new parameter by updating the configuration dictionary if the key didn’t exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Name of the parameter.</p></li>
<li><p><strong>value</strong> – Value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-vipercore.pipeline.project">
<span id="project"></span><h2>project<a class="headerlink" href="#module-vipercore.pipeline.project" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.project.</span></span><span class="sig-name descname"><span class="pre">Project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intermediate_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmentation_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extraction_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classification_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project" title="Permalink to this definition"></a></dt>
<dd><p>Project base class used to create a new viper project.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location_path</strong> (<em>str</em>) – Path to the folder where to project should be created. The folder is created in case the specified folder does not exist.</p></li>
<li><p><strong>config_path</strong> (<em>str</em><em>, </em><em>optional</em><em>, </em><em>default &quot;&quot;</em>) – Path pointing to a valid configuration file. The file will be copied to the project directory and renamed to the name specified in <code class="docutils literal notranslate"><span class="pre">DEFAULT_CLASSIFICATION_DIR_NAME</span></code>. If no config is specified, the existing config in the project directory will be used, if possible. See the section configuration to find out more about the config file.</p></li>
<li><p><strong>intermediate_output</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True intermediate outputs will be saved where applicable.</p></li>
<li><p><strong>debug</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True debug outputs will be printed where applicable.</p></li>
<li><p><strong>overwrite</strong> (bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code>) – When set to True, the processing step directory will be completely deleted and newly created when called.</p></li>
<li><p><strong>segmentation_f</strong> (Class, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Class containing segmentation workflow.</p></li>
<li><p><strong>extraction_f</strong> (Class, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Class containing extraction workflow.</p></li>
<li><p><strong>classification_f</strong> (Class, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Class containing classification workflow.</p></li>
<li><p><strong>selection_f</strong> (Class, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Class containing selection workflow.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.DEFAULT_CONFIG_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_CONFIG_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.project.Project.DEFAULT_CONFIG_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default config name which is used for the config file in the project directory. This name needs to be used when no config is supplied and the config is manually created in the project folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default “config.yml”</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.DEFAULT_SEGMENTATION_DIR_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_SEGMENTATION_DIR_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.project.Project.DEFAULT_SEGMENTATION_DIR_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default foldername for the segmentation process.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default “segmentation”</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.DEFAULT_EXTRACTION_DIR_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_EXTRACTION_DIR_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.project.Project.DEFAULT_EXTRACTION_DIR_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default foldername for the extraction process.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default “extraction”</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.DEFAULT_CLASSIFICATION_DIR_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_CLASSIFICATION_DIR_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.project.Project.DEFAULT_CLASSIFICATION_DIR_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default foldername for the classification process.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default “selection”</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.DEFAULT_SELECTION_DIR_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_SELECTION_DIR_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.project.Project.DEFAULT_SELECTION_DIR_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default foldername for the selection process.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default “classification”</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.classify">
<span class="sig-name descname"><span class="pre">classify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.classify" title="Permalink to this definition"></a></dt>
<dd><p>classify single cells with the defined classification at classification_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.extract">
<span class="sig-name descname"><span class="pre">extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.extract" title="Permalink to this definition"></a></dt>
<dd><p>extract single cells with the defined extraction at extraction_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.load_input_from_array">
<span class="sig-name descname"><span class="pre">load_input_from_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.load_input_from_array" title="Permalink to this definition"></a></dt>
<dd><p>load input image from a number of files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">[channels,</span> <span class="pre">height,</span> <span class="pre">width]</span></code> .</p></li>
<li><p><strong>remap</strong> (<em>list</em><em>(</em><em>int</em><em>)</em><em>, </em><em>optional</em>) – Define remapping of channels. For example use <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">2]</span></code> to change the order of the first and the second channel.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.load_input_from_file">
<span class="sig-name descname"><span class="pre">load_input_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[(0,</span> <span class="pre">-1),</span> <span class="pre">(0,</span> <span class="pre">-1)]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.load_input_from_file" title="Permalink to this definition"></a></dt>
<dd><p>load input image from a number of files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_paths</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – List containing paths to each channel like <code class="docutils literal notranslate"><span class="pre">[&quot;path1/img.tiff&quot;,</span> <span class="pre">&quot;path2/img.tiff&quot;,</span> <span class="pre">&quot;path3/img.tiff&quot;]</span></code>. Expects a list of file paths with length <code class="docutils literal notranslate"><span class="pre">input_channel</span></code> as defined in the config.yml. Input data is NOT copied to the project folder by default. Different segmentation functions especially tiled segmentations might copy the input</p></li>
<li><p><strong>crop</strong> (<em>list</em><em>(</em><em>tuple</em><em>)</em><em>, </em><em>optional</em>) – When set it can be used to crop the input image. The first element refers to the first dimension of the image and so on. For example use <code class="docutils literal notranslate"><span class="pre">[(0,1000),(0,2000)]</span></code> To crop the image to <cite>1000 px height</cite> and <cite>2000 px width</cite> from the top left corner.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.segment">
<span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.segment" title="Permalink to this definition"></a></dt>
<dd><p>segment project with the defined segmentation under segmentation_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.Project.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.Project.select" title="Permalink to this definition"></a></dt>
<dd><p>classify single cells with the defined classification at classification_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.project.</span></span><span class="sig-name descname"><span class="pre">TimecourseProject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject.extract">
<span class="sig-name descname"><span class="pre">extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject.extract" title="Permalink to this definition"></a></dt>
<dd><p>extract single cells with the defined extraction at extraction_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject.load_input_from_array">
<span class="sig-name descname"><span class="pre">load_input_from_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_array" title="Permalink to this definition"></a></dt>
<dd><p>load input image from a number of files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">[channels,</span> <span class="pre">height,</span> <span class="pre">width]</span></code> .</p></li>
<li><p><strong>remap</strong> (<em>list</em><em>(</em><em>int</em><em>)</em><em>, </em><em>optional</em>) – Define remapping of channels. For example use <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">2]</span></code> to change the order of the first and the second channel.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject.load_input_from_files">
<span class="sig-name descname"><span class="pre">load_input_from_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timepoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plate_layout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_files" title="Permalink to this definition"></a></dt>
<dd><p>Function to load timecourse experiments recorded with opera phenix into .h5 dataformat for further processing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject.load_input_from_files_and_merge">
<span class="sig-name descname"><span class="pre">load_input_from_files_and_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timepoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plate_layout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stitching_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Alexa488'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nucleus_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'DAPI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cytosol_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Alexa488'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject.load_input_from_files_and_merge" title="Permalink to this definition"></a></dt>
<dd><p>Function to load timecourse experiments recorded with opera phenix into .h5 dataformat for further processing after merging all the regions from each teampoint in each well.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.project.TimecourseProject.segment">
<span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.project.TimecourseProject.segment" title="Permalink to this definition"></a></dt>
<dd><p>segment project with the defined segmentation under segmentation_f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intermediate_output</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Can be set when calling to override the project wide flag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vipercore.pipeline.project.imread">
<span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.project.</span></span><span class="sig-name descname"><span class="pre">imread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">retval</span></span></span><a class="headerlink" href="#vipercore.pipeline.project.imread" title="Permalink to this definition"></a></dt>
<dd><p>.   &#64;brief Loads an image from a file.
.
.   &#64;anchor imread
.
.   The function imread loads an image from the specified file and returns it. If the image cannot be
.   read (because of missing file, improper permissions, unsupported or invalid format), the function
.   returns an empty matrix ( Mat::data==NULL ).
.
.   Currently, the following file formats are supported:
.
.   -   Windows bitmaps - *.bmp, *.dib (always supported)
.   -   JPEG files - *.jpeg, *.jpg, *.jpe (see the <em>Note</em> section)
.   -   JPEG 2000 files - *.jp2 (see the <em>Note</em> section)
.   -   Portable Network Graphics - *.png (see the <em>Note</em> section)
.   -   WebP - *.webp (see the <em>Note</em> section)
.   -   Portable image format - *.pbm, *.pgm, *.ppm *.pxm, *.pnm (always supported)
.   -   PFM files - *.pfm (see the <em>Note</em> section)
.   -   Sun rasters - *.sr, *.ras (always supported)
.   -   TIFF files - *.tiff, *.tif (see the <em>Note</em> section)
.   -   OpenEXR Image files - *.exr (see the <em>Note</em> section)
.   -   Radiance HDR - *.hdr, *.pic (always supported)
.   -   Raster and Vector geospatial data supported by GDAL (see the <em>Note</em> section)
.
.   &#64;note
.   -   The function determines the type of an image by the content, not by the file extension.
.   -   In the case of color images, the decoded images will have the channels stored in <strong>B G R</strong> order.
.   -   When using IMREAD_GRAYSCALE, the codec’s internal grayscale conversion will be used, if available.
.       Results may differ to the output of cvtColor()
.   -   On Microsoft Windows* OS and MacOSX*, the codecs shipped with an OpenCV image (libjpeg,
.       libpng, libtiff, and libjasper) are used by default. So, OpenCV can always read JPEGs, PNGs,
.       and TIFFs. On MacOSX, there is also an option to use native MacOSX image readers. But beware
.       that currently these native image loaders give images with different pixel values because of
.       the color management embedded into MacOSX.
.   -   On Linux*, BSD flavors and other Unix-like open-source operating systems, OpenCV looks for
.       codecs supplied with an OS image. Install the relevant packages (do not forget the development
.       files, for example, “libjpeg-dev”, in Debian* and Ubuntu*) to get the codec support or turn
.       on the OPENCV_BUILD_3RDPARTY_LIBS flag in CMake.
.   -   In the case you set <em>WITH_GDAL</em> flag to true in CMake and &#64;ref IMREAD_LOAD_GDAL to load the image,
.       then the [GDAL](<a class="reference external" href="http://www.gdal.org">http://www.gdal.org</a>) driver will be used in order to decode the image, supporting
.       the following formats: [Raster](<a class="reference external" href="http://www.gdal.org/formats_list.html">http://www.gdal.org/formats_list.html</a>),
.       [Vector](<a class="reference external" href="http://www.gdal.org/ogr_formats.html">http://www.gdal.org/ogr_formats.html</a>).
.   -   If EXIF information is embedded in the image file, the EXIF orientation will be taken into account
.       and thus the image will be rotated accordingly except if the flags &#64;ref IMREAD_IGNORE_ORIENTATION
.       or &#64;ref IMREAD_UNCHANGED are passed.
.   -   Use the IMREAD_UNCHANGED flag to keep the floating point values from PFM image.
.   -   By default number of pixels must be less than 2^30. Limit can be set using system
.       variable OPENCV_IO_MAX_IMAGE_PIXELS
.
.   &#64;param filename Name of file to be loaded.
.   &#64;param flags Flag that can take values of cv::ImreadModes</p>
</dd></dl>

</section>
<section id="segmentation">
<h2>segmentation<a class="headerlink" href="#segmentation" title="Permalink to this heading"></a></h2>
<section id="id1">
<h3>Segmentation<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.segmentation.</span></span><span class="sig-name descname"><span class="pre">Segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#vipercore.pipeline.base.ProcessingStep" title="vipercore.pipeline.base.ProcessingStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessingStep</span></code></a></p>
<p>Segmentation helper class used for creating segmentation workflows.
.. attribute:: maps</p>
<blockquote>
<div><p>Segmentation workflows based on the <a class="reference internal" href="#vipercore.pipeline.segmentation.Segmentation" title="vipercore.pipeline.segmentation.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> class can use maps for saving and loading checkpoints and perform. Maps can be numpy arrays</p>
<dl class="field-list simple">
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict(str)</p>
</dd>
</dl>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.DEFAULT_OUTPUT_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT_FILE</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.DEFAULT_OUTPUT_FILE" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">segmentation.h5</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.DEFAULT_FILTER_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_FILTER_FILE</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.DEFAULT_FILTER_FILE" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">classes.csv</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG">
<span class="sig-name descname"><span class="pre">PRINT_MAPS_ON_DEBUG</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.identifier">
<span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.identifier" title="Permalink to this definition"></a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Unique index of the shard.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int, default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.window">
<span class="sig-name descname"><span class="pre">window</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.window" title="Permalink to this definition"></a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Defines the window which is assigned to the shard. The window will be applied to the input. The first element refers to the first dimension of the image and so on. For example use <code class="docutils literal notranslate"><span class="pre">[(0,1000),(0,2000)]</span></code> To crop the image to <cite>1000 px height</cite> and <cite>2000 px width</cite> from the top left corner.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list(tuple), default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.input_path">
<span class="sig-name descname"><span class="pre">input_path</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.input_path" title="Permalink to this definition"></a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Location of the input hdf5 file. During sharded segmentation the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> derived helper class will save the input image in form of a hdf5 file. This makes the input image available for parallel reading by the segmentation processes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># two maps are initialized</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">maps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;map0&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="s2">&quot;map1&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

    <span class="c1"># its checked if the segmentation directory already contains these maps and they are then loaded. The index of the first map which has not been found is returned. It indicates the step where computation needs to resume</span>
    <span class="n">current_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_maps_from_disk</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># do stuff and generate map0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;map0&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># do stuff and generate map1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;map1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.call_as_shard">
<span class="sig-name descname"><span class="pre">call_as_shard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.call_as_shard" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper function for calling a sharded segmentation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function is intented for internal use by the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> helper class. In most cases it is not relevant to the creation of custom segmentation workflows.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.get_directory">
<span class="sig-name descname"><span class="pre">get_directory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.get_directory" title="Permalink to this definition"></a></dt>
<dd><p>Get the directory for this processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Directory path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Get the current timestamp in the DEFAULT_FORMAT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted timestamp.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.initialize_as_shard">
<span class="sig-name descname"><span class="pre">initialize_as_shard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.initialize_as_shard" title="Permalink to this definition"></a></dt>
<dd><p>Initialize Segmentation Step with further parameters needed for federated segmentation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function is intented for internal use by the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> helper class. In most cases it is not relevant to the creation of custom segmentation workflows.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>int</em>) – Unique index of the shard.</p></li>
<li><p><strong>window</strong> (<em>list</em><em>(</em><em>tuple</em><em>)</em>) – Defines the window which is assigned to the shard. The window will be applied to the input. The first element refers to the first dimension of the image and so on. For example use <code class="docutils literal notranslate"><span class="pre">[(0,1000),(0,2000)]</span></code> To crop the image to <cite>1000 px height</cite> and <cite>2000 px width</cite> from the top left corner.</p></li>
<li><p><strong>input_path</strong> (<em>str</em>) – Location of the input hdf5 file. During sharded segmentation the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> derived helper class will save the input image in form of a hdf5 file. This makes the input image available for parallel reading by the segmentation processes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.load_maps_from_disk">
<span class="sig-name descname"><span class="pre">load_maps_from_disk</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.load_maps_from_disk" title="Permalink to this definition"></a></dt>
<dd><p>Tries to load all maps which were defined in <code class="docutils literal notranslate"><span class="pre">self.maps</span></code> and returns the current state of processing.</p>
<dl class="simple">
<dt>Returns</dt><dd><p>(int): Index of the first map which could not be loaded. An index of zero indicates that computation needs to start at the first map.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.log" title="Permalink to this definition"></a></dt>
<dd><p>log a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>dict</em><em>(</em><em>str</em><em>)</em>) – Strings are s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Registers a new parameter by updating the configuration dictionary if the key didn’t exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Name of the parameter.</p></li>
<li><p><strong>value</strong> – Value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.save_map">
<span class="sig-name descname"><span class="pre">save_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.save_map" title="Permalink to this definition"></a></dt>
<dd><p>Saves newly computed map.</p>
<dl class="simple">
<dt>Args</dt><dd><p>map_name (str): name of the map to be saved, as defined in <code class="docutils literal notranslate"><span class="pre">self.maps</span></code>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># declare all intermediate maps</span>
<span class="bp">self</span><span class="o">.</span><span class="n">maps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;myMap&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

<span class="c1"># load intermediate maps if possible and get current processing step</span>
<span class="n">current_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_maps_from_disk</span><span class="p">()</span>

<span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>

    <span class="c1"># do some computations</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">maps</span><span class="p">[</span><span class="s2">&quot;myMap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myNumpyArray</span>

    <span class="c1"># save map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;myMap&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.save_segmentation">
<span class="sig-name descname"><span class="pre">save_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.save_segmentation" title="Permalink to this definition"></a></dt>
<dd><p>Saves the results of a segmentation at the end of the process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channels</strong> (<em>np.array</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">(height,</span> <span class="pre">width)</span></code> or``(channels, height, width)``. Channels are all data which are saved as floating point values e.g. images.</p></li>
<li><p><strong>labels</strong> (<em>np.array</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">(height,</span> <span class="pre">width)</span></code>. Labels are all data which are saved as integer values. These are mostly segmentation maps with integer values corresponding to the labels of cells.</p></li>
<li><p><strong>classes</strong> (<em>list</em><em>(</em><em>int</em><em>)</em>) – List of all classes in the labels array, which have passed the filtering step. All classes contained in this list will be extracted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.Segmentation.save_segmentation_zarr">
<span class="sig-name descname"><span class="pre">save_segmentation_zarr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.Segmentation.save_segmentation_zarr" title="Permalink to this definition"></a></dt>
<dd><p>Saves the results of a segemtnation at the end of the process to ome.zarr</p>
</dd></dl>

</dd></dl>

</section>
<section id="shardedsegmentation">
<h3>ShardedSegmentation<a class="headerlink" href="#shardedsegmentation" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.segmentation.</span></span><span class="sig-name descname"><span class="pre">ShardedSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#vipercore.pipeline.segmentation.Segmentation" title="vipercore.pipeline.segmentation.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a></p>
<p>object which can create log entries.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_OUTPUT_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_OUTPUT_FILE</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_OUTPUT_FILE" title="Permalink to this definition"></a></dt>
<dd><p>Default output file name for segmentations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">segmentation.h5</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_FILTER_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_FILTER_FILE</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_FILTER_FILE" title="Permalink to this definition"></a></dt>
<dd><p>Default file with filtered class IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">classes.csv</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_INPUT_IMAGE_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_INPUT_IMAGE_NAME</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_INPUT_IMAGE_NAME" title="Permalink to this definition"></a></dt>
<dd><p>Default name for the input image, which is written to disk as hdf5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">input_image.h5</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_SHARD_FOLDER">
<span class="sig-name descname"><span class="pre">DEFAULT_SHARD_FOLDER</span></span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.DEFAULT_SHARD_FOLDER" title="Permalink to this definition"></a></dt>
<dd><p>Date and time format used for logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">tiles</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.call_as_shard">
<span class="sig-name descname"><span class="pre">call_as_shard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.call_as_shard" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper function for calling a sharded segmentation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function is intented for internal use by the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> helper class. In most cases it is not relevant to the creation of custom segmentation workflows.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.get_directory">
<span class="sig-name descname"><span class="pre">get_directory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.get_directory" title="Permalink to this definition"></a></dt>
<dd><p>Get the directory for this processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Directory path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Get the current timestamp in the DEFAULT_FORMAT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted timestamp.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.initialize_as_shard">
<span class="sig-name descname"><span class="pre">initialize_as_shard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.initialize_as_shard" title="Permalink to this definition"></a></dt>
<dd><p>Initialize Segmentation Step with further parameters needed for federated segmentation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function is intented for internal use by the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> helper class. In most cases it is not relevant to the creation of custom segmentation workflows.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>int</em>) – Unique index of the shard.</p></li>
<li><p><strong>window</strong> (<em>list</em><em>(</em><em>tuple</em><em>)</em>) – Defines the window which is assigned to the shard. The window will be applied to the input. The first element refers to the first dimension of the image and so on. For example use <code class="docutils literal notranslate"><span class="pre">[(0,1000),(0,2000)]</span></code> To crop the image to <cite>1000 px height</cite> and <cite>2000 px width</cite> from the top left corner.</p></li>
<li><p><strong>input_path</strong> (<em>str</em>) – Location of the input hdf5 file. During sharded segmentation the <a class="reference internal" href="#vipercore.pipeline.segmentation.ShardedSegmentation" title="vipercore.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> derived helper class will save the input image in form of a hdf5 file. This makes the input image available for parallel reading by the segmentation processes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.load_maps_from_disk">
<span class="sig-name descname"><span class="pre">load_maps_from_disk</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.load_maps_from_disk" title="Permalink to this definition"></a></dt>
<dd><p>Tries to load all maps which were defined in <code class="docutils literal notranslate"><span class="pre">self.maps</span></code> and returns the current state of processing.</p>
<dl class="simple">
<dt>Returns</dt><dd><p>(int): Index of the first map which could not be loaded. An index of zero indicates that computation needs to start at the first map.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.log" title="Permalink to this definition"></a></dt>
<dd><p>log a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>dict</em><em>(</em><em>str</em><em>)</em>) – Strings are s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Registers a new parameter by updating the configuration dictionary if the key didn’t exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Name of the parameter.</p></li>
<li><p><strong>value</strong> – Value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.resolve_sharding">
<span class="sig-name descname"><span class="pre">resolve_sharding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sharding_plan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.resolve_sharding" title="Permalink to this definition"></a></dt>
<dd><p>The function iterates over a sharding plan and generates a new stitched hdf5 based segmentation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.save_map">
<span class="sig-name descname"><span class="pre">save_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.save_map" title="Permalink to this definition"></a></dt>
<dd><p>Saves newly computed map.</p>
<dl class="simple">
<dt>Args</dt><dd><p>map_name (str): name of the map to be saved, as defined in <code class="docutils literal notranslate"><span class="pre">self.maps</span></code>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># declare all intermediate maps</span>
<span class="bp">self</span><span class="o">.</span><span class="n">maps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;myMap&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

<span class="c1"># load intermediate maps if possible and get current processing step</span>
<span class="n">current_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_maps_from_disk</span><span class="p">()</span>

<span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>

    <span class="c1"># do some computations</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">maps</span><span class="p">[</span><span class="s2">&quot;myMap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myNumpyArray</span>

    <span class="c1"># save map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;myMap&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.save_segmentation">
<span class="sig-name descname"><span class="pre">save_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.save_segmentation" title="Permalink to this definition"></a></dt>
<dd><p>Saves the results of a segmentation at the end of the process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channels</strong> (<em>np.array</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">(height,</span> <span class="pre">width)</span></code> or``(channels, height, width)``. Channels are all data which are saved as floating point values e.g. images.</p></li>
<li><p><strong>labels</strong> (<em>np.array</em>) – Numpy array of shape <code class="docutils literal notranslate"><span class="pre">(height,</span> <span class="pre">width)</span></code>. Labels are all data which are saved as integer values. These are mostly segmentation maps with integer values corresponding to the labels of cells.</p></li>
<li><p><strong>classes</strong> (<em>list</em><em>(</em><em>int</em><em>)</em>) – List of all classes in the labels array, which have passed the filtering step. All classes contained in this list will be extracted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.segmentation.ShardedSegmentation.save_segmentation_zarr">
<span class="sig-name descname"><span class="pre">save_segmentation_zarr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.segmentation.ShardedSegmentation.save_segmentation_zarr" title="Permalink to this definition"></a></dt>
<dd><p>Saves the results of a segemtnation at the end of the process to ome.zarr</p>
</dd></dl>

</dd></dl>

</section>
<section id="timecoursesegmentation">
<h3>TimecourseSegmentation<a class="headerlink" href="#timecoursesegmentation" title="Permalink to this heading"></a></h3>
</section>
<section id="multithreadedtimecoursesegmentation">
<h3>MultithreadedTimecourseSegmentation<a class="headerlink" href="#multithreadedtimecoursesegmentation" title="Permalink to this heading"></a></h3>
</section>
</section>
<section id="module-vipercore.pipeline.workflows">
<span id="workflows"></span><h2>workflows<a class="headerlink" href="#module-vipercore.pipeline.workflows" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.BaseSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">BaseSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.BaseSegmentation" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolCellposeTimecourseSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation" title="Permalink to this definition"></a></dt>
<dd><p>Specialized Processing for Timecourse segmentation (i.e. smaller tiles not stitched together from many different wells and or timepoints).
No intermediate results are saved and everything is written to one .hdf5 file. Uses Cellpose segmentation models.</p>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CytosolSegmentationCellpose_Timecourse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.CytosolSegmentationCellpose" title="vipercore.pipeline.workflows.CytosolSegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse" title="vipercore.pipeline.workflows.CytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose_Timecourse</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.CytosolSegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolSegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.CytosolSegmentationCellpose" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.DAPISegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">DAPISegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.DAPISegmentation" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.DAPISegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">DAPISegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.DAPISegmentationCellpose" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">MultithreadedCytosolCellposeTimecourseSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation" title="Permalink to this definition"></a></dt>
<dd><dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CytosolSegmentationCellpose_Timecourse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.CytosolSegmentationCellpose" title="vipercore.pipeline.workflows.CytosolSegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse" title="vipercore.pipeline.workflows.MultithreadedCytosolCellposeTimecourseSegmentation.CytosolSegmentationCellpose_Timecourse"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose_Timecourse</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">MultithreadedWGATimecourseSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation" title="Permalink to this definition"></a></dt>
<dd><dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WGASegmentation_Timecourse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.WGASegmentation" title="vipercore.pipeline.workflows.WGASegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse" title="vipercore.pipeline.workflows.MultithreadedWGATimecourseSegmentation.WGASegmentation_Timecourse"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation_Timecourse</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedDAPISegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedDAPISegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedDAPISegmentation" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedDAPISegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedDAPISegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.DAPISegmentation" title="vipercore.pipeline.workflows.DAPISegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAPISegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedDAPISegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedDAPISegmentationCellpose.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.DAPISegmentationCellpose" title="vipercore.pipeline.workflows.DAPISegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAPISegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedWGASegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedWGASegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedWGASegmentation" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.ShardedWGASegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.ShardedWGASegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.WGASegmentation" title="vipercore.pipeline.workflows.WGASegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.WGASegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">WGASegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.WGASegmentation" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.WGATimecourseSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.workflows.</span></span><span class="sig-name descname"><span class="pre">WGATimecourseSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation" title="Permalink to this definition"></a></dt>
<dd><p>Specialized Processing for Timecourse segmentation (i.e. smaller tiles not stitched together from many different wells and or timepoints).
No intermediate results are saved and everything is written to one .hdf5 file.</p>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WGASegmentation_Timecourse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.WGASegmentation" title="vipercore.pipeline.workflows.WGASegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.workflows.WGATimecourseSegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.method" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse" title="vipercore.pipeline.workflows.WGATimecourseSegmentation.WGASegmentation_Timecourse"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation_Timecourse</span></code></a></p>
</dd></dl>

</dd></dl>

</section>
<section id="module-vipercore.pipeline.extraction">
<span id="extraction"></span><h2>extraction<a class="headerlink" href="#module-vipercore.pipeline.extraction" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.extraction.HDF5CellExtraction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.extraction.</span></span><span class="sig-name descname"><span class="pre">HDF5CellExtraction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.extraction.HDF5CellExtraction" title="Permalink to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="vipercore.pipeline.extraction.HDF5CellExtraction.save_index_to_remove">
<span class="sig-name descname"><span class="pre">save_index_to_remove</span></span><a class="headerlink" href="#vipercore.pipeline.extraction.HDF5CellExtraction.save_index_to_remove" title="Permalink to this definition"></a></dt>
<dd><p>class can be initiated to create a WGA extraction workfow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>string</em>) – Configuration for the extraction passed over from the <code class="xref py py-class docutils literal notranslate"><span class="pre">pipeline.Dataset</span></code></p></li>
<li><p><strong>string</strong> – Directiory for the extraction log and results. is created if not existing yet</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>default False</em>) – Flag used to output debug information and map images</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>default False</em>) – Flag used to recalculate all images, not yet implemented</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.extraction.TimecourseHDF5CellExtraction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.extraction.</span></span><span class="sig-name descname"><span class="pre">TimecourseHDF5CellExtraction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.extraction.TimecourseHDF5CellExtraction" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="classification">
<h2>classification<a class="headerlink" href="#classification" title="Permalink to this heading"></a></h2>
</section>
<section id="selection">
<h2>selection<a class="headerlink" href="#selection" title="Permalink to this heading"></a></h2>
<section id="lmdselection">
<h3>LMDSelection<a class="headerlink" href="#lmdselection" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vipercore.pipeline.selection.</span></span><span class="sig-name descname"><span class="pre">LMDSelection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#vipercore.pipeline.base.ProcessingStep" title="vipercore.pipeline.base.ProcessingStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessingStep</span></code></a></p>
<p>Select single cells from a segmented hdf5 file and generate cutting data for the Leica LMD microscope.</p>
<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection.get_directory">
<span class="sig-name descname"><span class="pre">get_directory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection.get_directory" title="Permalink to this definition"></a></dt>
<dd><p>Get the directory for this processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Directory path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection.get_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Get the current timestamp in the DEFAULT_FORMAT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Formatted timestamp.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection.log" title="Permalink to this definition"></a></dt>
<dd><p>log a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>dict</em><em>(</em><em>str</em><em>)</em>) – Strings are s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdf_location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_sets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration_marker</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection.process" title="Permalink to this definition"></a></dt>
<dd><p>Process function for starting the processing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hdf_location</strong> (<em>str</em>) – path of the segmentation hdf5 file. If this class is used as part of a project processing workflow, this argument will be provided.</p></li>
<li><p><strong>cell_sets</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – List of dictionaries containing the sets of cells which should be sorted into a single well.</p></li>
<li><p><strong>calibration_marker</strong> (<em>np.array</em>) – Array of size ‘(3,2)’ containing the calibration marker coordinates in the ‘(row, column)’ format.</p></li>
</ul>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If this class is used as part of a project processing workflow, the first argument will be provided by the <code class="docutils literal notranslate"><span class="pre">Project</span></code> class based on the previous segmentation. Therefore, only the second and third argument need to be provided. The Project class will automaticly provide the most recent segmentation forward together with the supplied parameters. The Implementation is similar to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="n">input_segmentation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">segmentation_f</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">selection_f</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">input_segmentation</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p class="rubric">Example</p>
<p>The following parameters are required in the config file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calibration marker should be defined as (row, column).</span>
<span class="n">marker_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">])</span>
<span class="n">marker_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">1100</span><span class="p">])</span>
<span class="n">marker_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1100</span><span class="p">,</span><span class="mi">505</span><span class="p">])</span>

<span class="c1"># A numpy Array of shape (3, 2) should be passed.</span>
<span class="n">calibration_marker</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">marker_0</span><span class="p">,</span> <span class="n">marker_1</span><span class="p">,</span> <span class="n">marker_2</span><span class="p">])</span>


<span class="c1"># Sets of cells can be defined by providing a name and a list of classes in a dictionary.</span>
<span class="n">cells_to_select</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset1&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]}]</span>

<span class="c1"># Alternatively, a path to a csv file can be provided.</span>
<span class="c1"># If a relative path is provided, it is accessed relativ to the projects base directory.</span>
<span class="n">cells_to_select</span> <span class="o">+=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset2&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="s2">&quot;segmentation/class_subset.csv&quot;</span><span class="p">}]</span>

<span class="c1"># If desired, wells can be passed with the individual sets.</span>
<span class="n">cells_to_select</span> <span class="o">+=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset3&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;well&quot;</span><span class="p">:</span><span class="s2">&quot;A1&quot;</span><span class="p">}]</span>

<span class="n">project</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">cells_to_select</span><span class="p">,</span> <span class="n">calibration_marker</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following parameters are required in the config file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">LMDSelection</span><span class="p">:</span>
<span class="w">    </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">    </span><span class="c1"># defines the channel used for generating cutting masks</span>
<span class="w">    </span><span class="c1"># segmentation.hdf5 =&gt; labels =&gt; segmentation_channel</span>
<span class="w">    </span><span class="c1"># When using WGA segmentation:</span>
<span class="w">    </span><span class="c1">#    0 corresponds to nuclear masks</span>
<span class="w">    </span><span class="c1">#    1 corresponds to cytosolic masks.</span>
<span class="w">    </span><span class="nt">segmentation_channel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># dilation of the cutting mask in pixel</span>
<span class="w">    </span><span class="nt">shape_dilation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">    </span><span class="c1"># Cutting masks are transformed by binary dilation and erosion</span>
<span class="w">    </span><span class="nt">binary_smoothing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">    </span><span class="c1"># number of datapoints which are averaged for smoothing</span>
<span class="w">    </span><span class="c1"># the number of datapoints over an distance of n pixel is 2*n</span>
<span class="w">    </span><span class="nt">convolution_smoothing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25</span>

<span class="w">    </span><span class="c1"># fold reduction of datapoints for compression</span>
<span class="w">    </span><span class="nt">poly_compression_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">    </span><span class="c1"># Optimization of the cutting path inbetween shapes</span>
<span class="w">    </span><span class="c1"># optimized paths improve the cutting time and the microscopes focus</span>
<span class="w">    </span><span class="c1"># valid options are [&quot;none&quot;, &quot;hilbert&quot;, &quot;greedy&quot;]</span>
<span class="w">    </span><span class="nt">path_optimization</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hilbert&quot;</span>

<span class="w">    </span><span class="c1"># Paramter required for hilbert curve based path optimization.</span>
<span class="w">    </span><span class="c1"># Defines the order of the hilbert curve used, which needs to be tuned with the total cutting area.</span>
<span class="w">    </span><span class="c1"># For areas of 1 x 1 mm we recommend at least p = 4,  for whole slides we recommend p = 7.</span>
<span class="w">    </span><span class="nt">hilbert_p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>

<span class="w">    </span><span class="c1"># Parameter required for greedy path optimization.</span>
<span class="w">    </span><span class="c1"># Instead of a global distance matrix, the k nearest neighbours are approximated.</span>
<span class="w">    </span><span class="c1"># The optimization problem is then greedily solved for the known set of nearest neighbours until the first set of neighbours is exhausted.</span>
<span class="w">    </span><span class="c1"># Established edges are then removed and the nearest neighbour approximation is recursivly repeated.</span>
<span class="w">    </span><span class="nt">greedy_k</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>

<span class="w">    </span><span class="c1"># The LMD reads coordinates as integers which leads to rounding of decimal places.</span>
<span class="w">    </span><span class="c1"># Points spread between two whole coordinates are therefore collapsed to whole coordinates.</span>
<span class="w">    </span><span class="c1"># This can be mitigated by scaling the entire coordinate system by a defined factor.</span>
<span class="w">    </span><span class="c1"># For a resolution of 0.6 um / px a factor of 100 is recommended.</span>
<span class="w">    </span><span class="nt">xml_decimal_transform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="w">    </span><span class="c1"># Overlapping shapes are merged based on a nearest neighbour heuristic.</span>
<span class="w">    </span><span class="c1"># All selected shapes closer than distance_heuristic pixel are checked for overlap.</span>
<span class="w">    </span><span class="nt">distance_heuristic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vipercore.pipeline.selection.LMDSelection.register_parameter">
<span class="sig-name descname"><span class="pre">register_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vipercore.pipeline.selection.LMDSelection.register_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Registers a new parameter by updating the configuration dictionary if the key didn’t exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Name of the parameter.</p></li>
<li><p><strong>value</strong> – Value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="processing.html" class="btn btn-neutral float-left" title="processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ml.html" class="btn btn-neutral float-right" title="ml" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Georg Wallmann, Sophia Mädler, Niklas Schmacke.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>